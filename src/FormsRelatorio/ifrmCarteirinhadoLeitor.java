/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * ifrmCarteirinhadoLeitor.java
 *
 * Created on 11/03/2011, 10:24:50
 */
package FormsRelatorio;

import Classes2.Leitores;
import FormsConsulta.MkTableModel;
import FormsConsulta.jdfrmConsultaLeitores;
import java.awt.Dimension;
import java.awt.Toolkit;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.HashMap;
import javax.swing.JOptionPane;
import Classes.DB;
import Classes.Funcoes;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.view.JasperViewer;

/**
 *
 * @author MARK
 */
public class ifrmCarteirinhadoLeitor extends javax.swing.JInternalFrame {

    private MkTableModel model;

    /** Creates new form ifrmCarteirinhadoLeitor */
    public ifrmCarteirinhadoLeitor() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        jPanel2 = new javax.swing.JPanel();
        txtConsulta = new javax.swing.JTextField();
        btnGerarRelatorio = new javax.swing.JButton();
        btnCancelar = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        btnAdicionar = new javax.swing.JButton();
        btnExcluir = new javax.swing.JButton();
        txtCodInicial = new javax.swing.JTextField();
        txtCodFinal = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        btnConsultaLeitor1 = new javax.swing.JButton();
        btnConsultaLeitor2 = new javax.swing.JButton();
        jPanel1 = new javax.swing.JPanel();
        rdTodos = new javax.swing.JRadioButton();
        rdSelecao = new javax.swing.JRadioButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();

        setClosable(true);
        setIconifiable(true);
        setMaximizable(true);
        setResizable(true);
        setTitle("Carteirinha do Leitor");
        setPreferredSize(new java.awt.Dimension(600, 450));
        addInternalFrameListener(new javax.swing.event.InternalFrameListener() {
            public void internalFrameActivated(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameClosed(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameClosing(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameDeactivated(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameDeiconified(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameIconified(javax.swing.event.InternalFrameEvent evt) {
            }
            public void internalFrameOpened(javax.swing.event.InternalFrameEvent evt) {
                formInternalFrameOpened(evt);
            }
        });

        jPanel2.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));

        txtConsulta.setFont(new java.awt.Font("Tahoma", 0, 14));

        btnGerarRelatorio.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        btnGerarRelatorio.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Icones/VRelatorio.png"))); // NOI18N
        btnGerarRelatorio.setText("Visualizar");
        btnGerarRelatorio.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGerarRelatorioActionPerformed(evt);
            }
        });

        btnCancelar.setFont(new java.awt.Font("Tahoma", 0, 14));
        btnCancelar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Icones/Cancelar.png"))); // NOI18N
        btnCancelar.setText("Cancelar");
        btnCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelarActionPerformed(evt);
            }
        });

        jLabel1.setFont(new java.awt.Font("Tahoma", 0, 14));
        jLabel1.setText("Digite os códigos separados por vírgula. Ex: 1,2");

        btnAdicionar.setFont(new java.awt.Font("Tahoma", 0, 14));
        btnAdicionar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Icones/Adicionar.png"))); // NOI18N
        btnAdicionar.setText("Adicionar");
        btnAdicionar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAdicionarActionPerformed(evt);
            }
        });

        btnExcluir.setFont(new java.awt.Font("Tahoma", 0, 14));
        btnExcluir.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Icones/Excluir.png"))); // NOI18N
        btnExcluir.setText("Excluir");
        btnExcluir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnExcluirActionPerformed(evt);
            }
        });

        txtCodInicial.setFont(new java.awt.Font("Tahoma", 0, 14));
        txtCodInicial.setPreferredSize(new java.awt.Dimension(60, 25));

        txtCodFinal.setFont(new java.awt.Font("Tahoma", 0, 14));

        jLabel2.setFont(new java.awt.Font("Tahoma", 0, 14));
        jLabel2.setText("Código Inicial:");

        jLabel3.setFont(new java.awt.Font("Tahoma", 0, 14));
        jLabel3.setText("Código Final:");

        btnConsultaLeitor1.setFont(new java.awt.Font("Tahoma", 0, 14));
        btnConsultaLeitor1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Icones/Procurar16x16.png"))); // NOI18N
        btnConsultaLeitor1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConsultaLeitor1ActionPerformed(evt);
            }
        });

        btnConsultaLeitor2.setFont(new java.awt.Font("Tahoma", 0, 14));
        btnConsultaLeitor2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Icones/Procurar16x16.png"))); // NOI18N
        btnConsultaLeitor2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConsultaLeitor2ActionPerformed(evt);
            }
        });

        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(txtConsulta, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 542, Short.MAX_VALUE)
                    .add(jLabel1)
                    .add(jPanel2Layout.createSequentialGroup()
                        .add(jLabel2)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(txtCodInicial, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 60, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(btnConsultaLeitor1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 30, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(jLabel3)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(txtCodFinal, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 60, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(btnConsultaLeitor2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 30, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(jPanel2Layout.createSequentialGroup()
                        .add(btnAdicionar, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 120, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(btnExcluir, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(77, 77, 77)
                        .add(btnCancelar, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 120, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(btnGerarRelatorio)
                        .add(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel2Layout.createSequentialGroup()
                .add(16, 16, 16)
                .add(jLabel1)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(txtConsulta, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                        .add(txtCodInicial, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 25, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(jLabel2))
                    .add(btnConsultaLeitor1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 25, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                        .add(txtCodFinal, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 25, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                        .add(jLabel3))
                    .add(btnConsultaLeitor2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 25, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                    .add(btnGerarRelatorio)
                    .add(btnCancelar)
                    .add(btnAdicionar)
                    .add(btnExcluir))
                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jPanel1.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));

        buttonGroup1.add(rdTodos);
        rdTodos.setFont(new java.awt.Font("Tahoma", 0, 14));
        rdTodos.setSelected(true);
        rdTodos.setText("Todos");
        rdTodos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdTodosActionPerformed(evt);
            }
        });

        buttonGroup1.add(rdSelecao);
        rdSelecao.setFont(new java.awt.Font("Tahoma", 0, 14));
        rdSelecao.setText("Somente os selecionados");
        rdSelecao.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rdSelecaoActionPerformed(evt);
            }
        });

        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .add(rdTodos)
                .add(18, 18, 18)
                .add(rdSelecao)
                .addContainerGap(296, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(11, Short.MAX_VALUE)
                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                    .add(rdTodos)
                    .add(rdSelecao))
                .addContainerGap())
        );

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {},
                {},
                {},
                {}
            },
            new String [] {

            }
        ));
        jTable1.setAutoResizeMode(javax.swing.JTable.AUTO_RESIZE_OFF);
        jScrollPane1.setViewportView(jTable1);

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(org.jdesktop.layout.GroupLayout.LEADING, jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 564, Short.MAX_VALUE)
                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .addContainerGap()
                .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 197, Short.MAX_VALUE)
                .addContainerGap())
        );

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width-600)/2, (screenSize.height-450)/2, 600, 450);
    }// </editor-fold>//GEN-END:initComponents

//Ler arquivo texto
    private String CaminhodoRelatorio() {
        String caminho = null;
        try {
            FileReader reader = new FileReader(new File("config.txt"));
            BufferedReader leitor = new BufferedReader(reader);

            //Lê linha por linha \n quebra a linha
            leitor.readLine().substring(8);
            leitor.readLine().substring(12);
            caminho = leitor.readLine().substring(12);

            //Fecha a leitura
            reader.close();
            leitor.close();

        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e.getMessage(), "Atenção", JOptionPane.WARNING_MESSAGE);
        }
        return caminho;
    }

    private void btnGerarRelatorioActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGerarRelatorioActionPerformed

        DB banco = new DB();
        banco.connect();
        HashMap parametros = new HashMap();
        String sql = null;
        //Verifica se está preenchido os campos
        boolean ok = false;
        if (rdTodos.isSelected() == true) {
            sql = "SELECT c.codigo AS codigo,"
                    + "c.nomedoleitor AS nomedoleitor,cb.nome AS biblioteca,"
                    + "c.datadenasc AS datadenasc,c.endereco AS endereco,"
                    + "cid.descricao AS cidade,u.descricao AS uf,"
                    + "c.telefone AS telefone,b.descricao AS bairro,"
                    + "c.nrcasa AS nrcasa "
                    + "FROM cadleitores c,cadbiblioteca cb,cidade cid,uf u,bairro b "
                    + "WHERE c.cidade_id=cid.idcidade "
                    + "AND c.bairro_id=b.idbairro "
                    + "AND c.uf_iduf=u.iduf";
        } else {
            sql = "SELECT c.codigo AS codigo,"
                    + "c.nomedoleitor AS nomedoleitor,cb.nome AS biblioteca,"
                    + "c.datadenasc AS datadenasc,c.endereco AS endereco,"
                    + "cid.descricao AS cidade,u.descricao AS uf,"
                    + "c.telefone AS telefone,b.descricao AS bairro,"
                    + "c.nrcasa AS nrcasa "
                    + "FROM cadleitores c,cadbiblioteca cb,cidade cid,uf u,bairro b "
                    + "WHERE c.cidade_id=cid.idcidade "
                    + "AND c.bairro_id=b.idbairro "
                    + "AND c.uf_iduf=u.iduf "
                    + "AND c.codigo IN (" + txtConsulta.getText().trim() + ")";
        }

        if (rdSelecao.isSelected()) {
//            if (txtCodInicial.getText().trim().equals("")) {
//                JOptionPane.showMessageDialog(null, "Digite pelo menos um código !", "Aviso", JOptionPane.WARNING_MESSAGE);
//                txtConsulta.requestFocus();
//            }
            if (jTable1.getRowCount()==0) {
                JOptionPane.showMessageDialog(null, "Adicione pelo menos um leitor !", "Aviso", JOptionPane.WARNING_MESSAGE);
                txtConsulta.requestFocus();
            }
            if (jTable1.getRowCount()>0) {
                ok = true;
            }
        } else {
            ok = true;
        }
//----------SE FOR VERDADEIRO, ENTÃO MOSTRA O RELATÓRIO-------------------------
        if (ok == true) {
            try {
                parametros.put("pSQL", sql);
//             JasperPrint jp = JasperFillManager.fillReport(CaminhodoRelatorio()+"CarteirinhadoLeitor.jasper", parametros, banco.conn);
                JasperPrint jp = JasperFillManager.fillReport("C:/Biblioteca/RELATORIOS/CarteirinhadoLeitor.jasper", parametros, banco.conn);
                JasperViewer jrv = new JasperViewer(jp, false);
                //Para maximizar o relatório
                Toolkit tk = Toolkit.getDefaultToolkit();
                Dimension screenSize = tk.getScreenSize();
                //Maximiza o relatório
                jrv.setSize(screenSize.width, screenSize.height);
                jrv.setLocation(0, 0);
                jrv.setTitle("Etiquetas com código de barras");
                jrv.setVisible(true);
                jrv.setFitPageZoomRatio();
                banco.disconnect();
            } catch (Exception e) {
                JOptionPane.showMessageDialog(null, "Erro " + e.getMessage(), "Aviso", JOptionPane.WARNING_MESSAGE);
                e.printStackTrace();
            }
        }
    }//GEN-LAST:event_btnGerarRelatorioActionPerformed

    private void btnCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelarActionPerformed
        this.dispose();
    }//GEN-LAST:event_btnCancelarActionPerformed

    private void rdTodosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdTodosActionPerformed
        txtConsulta.setEnabled(false);
        txtCodInicial.setEnabled(false);
        txtCodFinal.setEnabled(false);
    }//GEN-LAST:event_rdTodosActionPerformed

    private void rdSelecaoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_rdSelecaoActionPerformed
        txtConsulta.setEnabled(true);
        txtCodInicial.setEnabled(true);
        txtCodFinal.setEnabled(true);
    }//GEN-LAST:event_rdSelecaoActionPerformed

    private void formInternalFrameOpened(javax.swing.event.InternalFrameEvent evt) {//GEN-FIRST:event_formInternalFrameOpened
        txtConsulta.setEnabled(false);
        txtCodInicial.setEnabled(false);
        txtCodFinal.setEnabled(false);
        String[] colunas = {"Código", "Nome do Leitor"};
        boolean[] edicao = {false, false};
        ArrayList dados = new ArrayList();
        dados.add(new String[]{"", ""});
        model = new MkTableModel(dados, colunas, edicao);
        jTable1.setModel(model);
        jTable1.getColumnModel().getColumn(0).setPreferredWidth(100);
        jTable1.getColumnModel().getColumn(1).setPreferredWidth(350);
        model.removeAllRows();
    }//GEN-LAST:event_formInternalFrameOpened

    private void btnAdicionarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAdicionarActionPerformed
        if (txtCodInicial.getText().trim().equals("")) {
            JOptionPane.showMessageDialog(null, "Digite o código inicial do leitor", "Mensagem", JOptionPane.INFORMATION_MESSAGE);
        } else if (txtCodFinal.getText().trim().equals("")) {
            JOptionPane.showMessageDialog(null, "Digite o código final do leitor", "Mensagem", JOptionPane.INFORMATION_MESSAGE);
        } else if (!txtCodInicial.getText().trim().equals("") && !txtCodFinal.getText().trim().equals("")) {
            for (int i = Integer.parseInt(txtCodInicial.getText().trim()); i <= Integer.parseInt(txtCodFinal.getText().trim()); i++) {
                for (Leitores leitor : new Leitores().carregar()) {
                    if (leitor.getCodigo() == i) {
                        model.addRow(new String[]{String.valueOf(i), leitor.getNomedoleitor()});
                        txtConsulta.setText(txtConsulta.getText().trim() + i + ",");
                    }
                }
            }
            txtConsulta.setText(txtConsulta.getText().trim().substring(0, txtConsulta.getText().trim().length() - 1));
        }

    }//GEN-LAST:event_btnAdicionarActionPerformed

    private void btnExcluirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnExcluirActionPerformed
        int[] linhas = jTable1.getSelectedRows();//captura as linhas selecionadas
        if (jTable1.getRowCount() > 0 && jTable1.isRowSelected(jTable1.getSelectedRow())) {
            for (int i = (linhas.length - 1); i >= 0; i--) {
                model.removeRow(linhas[i]);//remove todas as linhas selecionadas                
            }
            //Primeiro apaga tudo
            txtConsulta.setText("");
            //Agora mostra novamente os códigos
            if (model.getRowCount() > 0) {
                for (int i = 0; i < model.getRowCount(); i++) {
                    txtConsulta.setText(txtConsulta.getText().trim() + model.getValueAt(i, 0) + ",");
                }
                txtConsulta.setText(txtConsulta.getText().trim().substring(0, txtConsulta.getText().trim().length() - 1));
            }
        }

    }//GEN-LAST:event_btnExcluirActionPerformed

    private void btnConsultaLeitor1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnConsultaLeitor1ActionPerformed
        jdfrmConsultaLeitores cl = new jdfrmConsultaLeitores(null, closable);
        cl.setVisible(true);
        cl.toFront();
        if (cl.okSelecionado == true) {
            txtCodInicial.setText(cl.getCodigo());
            txtCodInicial.requestFocus();
            cl.setVisible(false);
            cl.dispose();
        }
    }//GEN-LAST:event_btnConsultaLeitor1ActionPerformed

    private void btnConsultaLeitor2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnConsultaLeitor2ActionPerformed
        jdfrmConsultaLeitores cl = new jdfrmConsultaLeitores(null, closable);
        cl.setVisible(true);
        cl.toFront();
        if (cl.okSelecionado == true) {
            txtCodFinal.setText(cl.getCodigo());
            txtCodFinal.requestFocus();
            cl.setVisible(false);
            cl.dispose();
        }
    }//GEN-LAST:event_btnConsultaLeitor2ActionPerformed
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAdicionar;
    private javax.swing.JButton btnCancelar;
    private javax.swing.JButton btnConsultaLeitor1;
    private javax.swing.JButton btnConsultaLeitor2;
    private javax.swing.JButton btnExcluir;
    private javax.swing.JButton btnGerarRelatorio;
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    private javax.swing.JRadioButton rdSelecao;
    private javax.swing.JRadioButton rdTodos;
    private javax.swing.JTextField txtCodFinal;
    private javax.swing.JTextField txtCodInicial;
    private javax.swing.JTextField txtConsulta;
    // End of variables declaration//GEN-END:variables
}
